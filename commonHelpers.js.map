{"version":3,"file":"commonHelpers.js","sources":["../src/img/octagon.svg","../src/img/close_button.svg","../src/js/main.js"],"sourcesContent":["export default \"__VITE_ASSET__de411352__\"","export default \"__VITE_ASSET__d65044ed__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport octagon from '../img/octagon.svg';\nimport closeButton from '../img/close_button.svg';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.form-input');\nconst galleryContainer = document.querySelector('.gallery-container');\nconst loader = document.querySelector('.loader');\nconst loaderMarkup = '<p class=\"loader\">Loading images, please wait...</p>';\nconst searchParams = new URLSearchParams({\n  key: '42207525-2f984868f7881b9b68563ca8c',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  q: '',\n});\n\nconst gallery = new SimpleLightbox('.gallery-link', { alertError: false });\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  if (input.value.trim()) {\n    processingPixabayRequest();\n  } else {\n    createPopUp('Search field can not be empty');\n  }\n  form.reset();\n});\n\nfunction pixabayRequest(str) {\n  galleryContainer.innerHTML = loaderMarkup;\n  searchParams.set('q', str);\n  return fetch(`https://pixabay.com/api/?${searchParams}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}\n\nfunction processingPixabayRequest() {\n  pixabayRequest(input.value)\n    .then(images => {\n      if (images.hits.length) {\n        createMarkup(images.hits);\n        gallery.refresh();\n        checkRenderImg();\n      } else {\n        createPopUp(\n          'Sorry, there are no images matching your search query. Please, try again!'\n        );\n      }\n    })\n    .catch(error => {\n      createPopUp('Oops! Something went wrong. Try again!');\n      console.log(error);\n    });\n}\n\nfunction createMarkup(arr) {\n  const markup = arr\n    .map(\n      item =>\n        `<li class='gallery-item'><a class='gallery-link' href=${item.largeImageURL}><img class='gallery-img' src=${item.webformatURL} width='360' height='200' alt=${item.tags}><span class=\"img-loader\"></span></a><ul class='desc-wrapper'><li class='desc-text'><h3>Likes</h3><p>${item.likes}</p></li><li class='desc-text'><h3>Views</h3><p>${item.views}</p></li><li class='desc-text'><h3>Comments</h3><p>${item.comments}</p></li><li class='desc-text'><h3>Downloads</h3><p>${item.downloads}</p></li></ul></li>`\n    )\n    .join('');\n  galleryContainer.innerHTML = markup;\n}\n\nfunction createPopUp(message) {\n  iziToast.show({\n    class: 'my-iziToast',\n    backgroundColor: '#EF4040',\n    messageColor: '#fff',\n    messageSize: 16,\n    messageLineHeight: '24',\n    message: message,\n    position: 'topRight',\n    iconUrl: octagon,\n    progressBarColor: '#B51B1B;',\n    close: false,\n    transitionIn: 'bounceInLeft',\n    transitionOut: 'fadeOutRight',\n    buttons: [\n      [\n        `<button type=\"button\" style=\"background-color: #EF4040; padding-top: 15px; padding-bottom: 15px\"><img src=${closeButton}></button>`,\n        function (instance, toast) {\n          instance.hide({ transitionOut: 'fadeOutRight' }, toast);\n        },\n      ],\n    ],\n    onOpening: function (instance, toast) {\n      galleryContainer.innerHTML = '';\n      input.addEventListener(\n        'input',\n        () => {\n          try {\n            iziToast.hide(\n              {\n                transitionOut: 'fadeOutRight',\n              },\n              toast\n            );\n          } catch (error) {\n            return;\n          }\n        },\n        { once: true }\n      );\n    },\n  });\n}\n\nfunction checkRenderImg() {\n  const galleryImg = document.querySelectorAll('.gallery-img');\n  galleryImg.forEach(item =>\n    item.addEventListener('load', () => {\n      item.nextSibling.classList.add('img-loader-hidden');\n    })\n  );\n}\n"],"names":["octagon","closeButton","form","input","galleryContainer","loaderMarkup","searchParams","gallery","SimpleLightbox","e","processingPixabayRequest","createPopUp","pixabayRequest","str","response","images","createMarkup","checkRenderImg","error","arr","markup","item","message","iziToast","instance","toast"],"mappings":"6vBAAA,MAAeA,EAAA,6CCAAC,EAAA,kDCOTC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,aAAa,EAC5CC,EAAmB,SAAS,cAAc,oBAAoB,EACrD,SAAS,cAAc,SAAS,EAC/C,MAAMC,EAAe,uDACfC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAG,EACL,CAAC,EAEKC,EAAU,IAAIC,EAAe,gBAAiB,CAAE,WAAY,EAAK,CAAE,EAEzEN,EAAK,iBAAiB,SAAUO,GAAK,CACnCA,EAAE,eAAc,EACZN,EAAM,MAAM,OACdO,IAEAC,EAAY,+BAA+B,EAE7CT,EAAK,MAAK,CACZ,CAAC,EAED,SAASU,EAAeC,EAAK,CAC3B,OAAAT,EAAiB,UAAYC,EAC7BC,EAAa,IAAI,IAAKO,CAAG,EAClB,MAAM,4BAA4BP,CAAY,EAAE,EAAE,KAAKQ,GAAY,CACxE,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CAEA,SAASJ,GAA2B,CAClCE,EAAeT,EAAM,KAAK,EACvB,KAAKY,GAAU,CACVA,EAAO,KAAK,QACdC,EAAaD,EAAO,IAAI,EACxBR,EAAQ,QAAO,EACfU,KAEAN,EACE,2EACV,CAEA,CAAK,EACA,MAAMO,GAAS,CACdP,EAAY,wCAAwC,EACpD,QAAQ,IAAIO,CAAK,CACvB,CAAK,CACL,CAEA,SAASF,EAAaG,EAAK,CACzB,MAAMC,EAASD,EACZ,IACCE,GACE,yDAAyDA,EAAK,aAAa,iCAAiCA,EAAK,YAAY,iCAAiCA,EAAK,IAAI,wGAAwGA,EAAK,KAAK,mDAAmDA,EAAK,KAAK,sDAAsDA,EAAK,QAAQ,uDAAuDA,EAAK,SAAS,qBACje,EACA,KAAK,EAAE,EACVjB,EAAiB,UAAYgB,CAC/B,CAEA,SAAST,EAAYW,EAAS,CAC5BC,EAAS,KAAK,CACZ,MAAO,cACP,gBAAiB,UACjB,aAAc,OACd,YAAa,GACb,kBAAmB,KACnB,QAASD,EACT,SAAU,WACV,QAAStB,EACT,iBAAkB,WAClB,MAAO,GACP,aAAc,eACd,cAAe,eACf,QAAS,CACP,CACE,6GAA6GC,CAAW,aACxH,SAAUuB,EAAUC,EAAO,CACzBD,EAAS,KAAK,CAAE,cAAe,cAAgB,EAAEC,CAAK,CACvD,CACF,CACF,EACD,UAAW,SAAUD,EAAUC,EAAO,CACpCrB,EAAiB,UAAY,GAC7BD,EAAM,iBACJ,QACA,IAAM,CACJ,GAAI,CACFoB,EAAS,KACP,CACE,cAAe,cAChB,EACDE,CACd,CACW,MAAe,CACd,MACD,CACF,EACD,CAAE,KAAM,EAAM,CACtB,CACK,CACL,CAAG,CACH,CAEA,SAASR,GAAiB,CACL,SAAS,iBAAiB,cAAc,EAChD,QAAQI,GACjBA,EAAK,iBAAiB,OAAQ,IAAM,CAClCA,EAAK,YAAY,UAAU,IAAI,mBAAmB,CACxD,CAAK,CACL,CACA"}